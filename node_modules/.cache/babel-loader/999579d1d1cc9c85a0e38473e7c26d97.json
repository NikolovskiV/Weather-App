{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.forecast = void 0;\n\nvar util_1 = require(\"./util\");\n\nvar requests_1 = require(\"./requests\");\n\nvar querify_1 = require(\"./querify\");\n\nvar list_querify_1 = require(\"./list-querify\");\n\nvar location = function () {\n  var loc = {\n    set: function (item) {\n      delete loc.geo;\n      delete loc.ids;\n      delete loc.places;\n      delete loc.zip;\n\n      switch (item.kind) {\n        case 'geo':\n          loc.geo = item.geo;\n          break;\n\n        case 'id':\n          loc.ids = [item.id];\n          break;\n\n        case 'ids':\n          loc.ids = item.ids;\n          break;\n\n        case 'place':\n          loc.places = [item.place];\n          break;\n\n        case 'places':\n          loc.places = item.places;\n          break;\n\n        case 'zip':\n          loc.zip = item.zip;\n          break;\n      }\n\n      return loc;\n    },\n    get: function () {\n      if (loc.geo) {\n        return {\n          kind: 'geo',\n          geo: loc.geo\n        };\n      }\n\n      if (loc.ids && loc.ids.length === 1) {\n        return {\n          kind: 'id',\n          id: loc.ids[0]\n        };\n      }\n\n      if (loc.ids && loc.ids.length > 1) {\n        return {\n          kind: 'ids',\n          ids: loc.ids\n        };\n      }\n\n      if (loc.places && loc.places.length === 1) {\n        return {\n          kind: 'place',\n          place: loc.places[0]\n        };\n      }\n\n      if (loc.places && loc.places.length > 1) {\n        return {\n          kind: 'places',\n          places: loc.places\n        };\n      }\n\n      if (loc.zip) {\n        return {\n          kind: 'zip',\n          zip: loc.zip\n        };\n      }\n\n      return {\n        kind: 'nothing'\n      };\n    }\n  };\n  return loc;\n};\n\nvar storageUnit = {\n  stored: {},\n  clear: function () {\n    storageUnit.stored = {};\n  },\n  getItem: function (key) {\n    return storageUnit.stored[key] ? JSON.stringify(storageUnit.stored[key]) : null;\n  },\n  key: function (index) {\n    return Object.keys(storageUnit.stored)[index];\n  },\n  length: 0,\n  removeItem: function (key) {\n    if (storageUnit.stored[key] !== undefined) {\n      storageUnit.length -= 1;\n      delete storageUnit.stored[key];\n    }\n  },\n  setItem: function (key, value) {\n    if (storageUnit.stored[key] === undefined) {\n      storageUnit.length += 1;\n      storageUnit.stored[key] = JSON.parse(value);\n    }\n  }\n};\n\nvar resolve = function (forec) {\n  var copy = forec.copy();\n  Promise.all(forec.running).then(function () {\n    forec.running = forec.subscribers.map(function (agent) {\n      return agent(copy.dates[0], copy.dates[1], copy);\n    });\n  });\n};\n\nexports.forecast = function (apiKey, isPro) {\n  if (isPro === void 0) {\n    isPro = false;\n  }\n\n  if (!apiKey) {\n    throw Error('Cannot initialize forecast without api key from openweathermap.org!');\n  }\n\n  var todayValue = util_1.today();\n  var end = new Date(todayValue);\n  end.setHours(23);\n  end.setMinutes(59);\n  end.setSeconds(59);\n  var forec = querify_1.querify({\n    dates: [todayValue, end],\n    storage: storageUnit,\n    location: location().set({\n      kind: 'place',\n      place: 'New York'\n    }),\n    lang: 'en',\n    language: function (lang) {\n      forec.lang = lang;\n      forec.response = [];\n      resolve(forec);\n      return forec;\n    },\n    units: function (unit) {\n      forec.unit = unit === 'kelvin' ? undefined : unit;\n      forec.response = [];\n      resolve(forec);\n      return forec;\n    },\n    reporter: console.warn,\n    fetchingFn: typeof window !== 'undefined' ? window.fetch : undefined,\n    geo: function (geolocation) {\n      if (geolocation === void 0) {\n        geolocation = typeof navigator !== 'undefined' && typeof navigator.geolocation !== 'undefined' ? navigator.geolocation : undefined;\n      }\n\n      return __awaiter(void 0, void 0, void 0, function () {\n        var result, e_1;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              if (!geolocation) {\n                return [2\n                /*return*/\n                , forec];\n              }\n\n              _a.label = 1;\n\n            case 1:\n              _a.trys.push([1, 3,, 4]);\n\n              return [4\n              /*yield*/\n              , new Promise(function (resolve, reject) {\n                return geolocation.getCurrentPosition(resolve, reject);\n              })];\n\n            case 2:\n              result = _a.sent();\n              forec.around(result.coords.latitude, result.coords.longitude);\n              return [3\n              /*break*/\n              , 4];\n\n            case 3:\n              e_1 = _a.sent();\n              forec.reporter(e_1);\n              return [3\n              /*break*/\n              , 4];\n\n            case 4:\n              return [2\n              /*return*/\n              , forec];\n          }\n        });\n      });\n    },\n    around: function (lat, lon) {\n      forec.location.set({\n        kind: 'geo',\n        geo: {\n          lat: lat,\n          lon: lon\n        }\n      });\n      forec.response = [];\n      resolve(forec);\n      return forec;\n    },\n    at: function (from, to) {\n      if (!to) {\n        var end_1 = new Date(from);\n        end_1.setHours(23);\n        end_1.setMinutes(59);\n        end_1.setSeconds(59);\n        forec.dates = [new Date(from), end_1];\n      } else {\n        forec.dates = [new Date(from), new Date(to)];\n      }\n\n      resolve(forec);\n      return forec;\n    },\n    copy: function () {\n      var copy = exports.forecast(apiKey, isPro);\n      copy.dates = __spreadArrays(forec.dates);\n      copy.location = __assign({}, forec.location);\n      copy.response = __spreadArrays(forec.response);\n      copy.reporter = forec.reporter;\n      copy.fetchingFn = forec.fetchingFn;\n      copy.storage = forec.storage;\n      copy.subscribers = __spreadArrays(forec.subscribers);\n      copy.running = __spreadArrays(forec.running);\n      copy.unit = forec.unit;\n      copy.lang = forec.lang;\n      copy.reporter = forec.reporter;\n      return copy;\n    },\n    fetch: function (fn) {\n      forec.fetchingFn = fn;\n      return forec;\n    },\n    in: function () {\n      var places = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        places[_i] = arguments[_i];\n      }\n\n      if (places.length > 0) {\n        if (typeof places[0] === 'string') {\n          if (places.length > 1) {\n            forec.location.set({\n              kind: 'places',\n              places: places\n            });\n          } else {\n            forec.location.set({\n              kind: 'place',\n              place: places[0]\n            });\n          }\n        }\n\n        if (typeof places[0] === 'number') {\n          if (places.length > 1) {\n            forec.location.set({\n              kind: 'ids',\n              ids: places\n            });\n          } else {\n            forec.location.set({\n              kind: 'id',\n              id: places[0]\n            });\n          }\n        }\n\n        forec.response = [];\n        resolve(forec);\n      }\n\n      return forec;\n    },\n    zip: function (code, country) {\n      forec.location.set({\n        kind: 'zip',\n        zip: {\n          code: code,\n          country: country\n        }\n      });\n      forec.response = [];\n      resolve(forec);\n      return forec;\n    },\n    error: function (reporter) {\n      forec.reporter = reporter;\n      return forec;\n    },\n    subscribe: function () {\n      var agents = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        agents[_i] = arguments[_i];\n      }\n\n      forec.subscribers = agents;\n      return forec;\n    },\n    clearSubscribers: function () {\n      return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              return [4\n              /*yield*/\n              , Promise.all(forec.running)];\n\n            case 1:\n              _a.sent();\n\n              forec.subscribers = [];\n              return [2\n              /*return*/\n              , forec];\n          }\n        });\n      });\n    },\n    subscribers: [],\n    running: [],\n    dayAfterTomorrow: function () {\n      forec.at(util_1.daysAheadFromNow(2));\n      return forec;\n    },\n    dayBeforeYesterday: function () {\n      forec.at(util_1.daysAheadFromNow(-2));\n      return forec;\n    },\n    tomorrow: function () {\n      forec.at(util_1.daysAheadFromNow(1));\n      return forec;\n    },\n    yesterday: function () {\n      forec.at(util_1.daysAheadFromNow(-1));\n      return forec;\n    },\n    today: function () {\n      var todayValue = util_1.today();\n      var end = new Date(todayValue);\n      end.setHours(23);\n      end.setMinutes(59);\n      end.setSeconds(59);\n      forec.at(todayValue, end);\n      return forec;\n    },\n    next: function (which) {\n      if (!which || which === 'day') {\n        var nextFrom = new Date(forec.dates[0]);\n        nextFrom.setDate(nextFrom.getDate() + 1);\n        var nextEnd = new Date(nextFrom);\n        nextEnd.setDate(nextEnd.getDate() + 1);\n        forec.at(nextFrom, nextEnd);\n      } else {\n        var nextFrom = new Date(forec.dates[0]);\n        nextFrom.setHours(nextFrom.getHours() + 1);\n        var nextEnd = new Date(nextFrom);\n        nextEnd.setDate(nextEnd.getDate() + 1);\n        forec.at(nextFrom, nextEnd);\n      }\n\n      return forec;\n    },\n    previous: function (which) {\n      if (!which || which === 'day') {\n        var nextFrom = new Date(forec.dates[0]);\n        nextFrom.setDate(nextFrom.getDate() - 1);\n        var nextEnd = new Date(nextFrom);\n        nextEnd.setDate(nextEnd.getDate() + 1);\n        forec.at(nextFrom, nextEnd);\n      } else {\n        var nextFrom = new Date(forec.dates[0]);\n        nextFrom.setHours(nextFrom.getHours() - 1);\n        var nextEnd = new Date(nextFrom);\n        nextEnd.setDate(nextEnd.getDate() + 1);\n        forec.at(nextFrom, nextEnd);\n      }\n\n      return forec;\n    },\n    week: function (kind) {\n      forec.at.apply(forec, util_1.closestWeek(kind || 'all'));\n      return forec;\n    },\n    hour: function (which) {\n      var movedDate = new Date(forec.dates[0]);\n      movedDate.setHours(which);\n      var end = new Date(movedDate.toString());\n      end.setHours(23);\n      end.setMinutes(59);\n      end.setSeconds(59);\n      forec.at(movedDate, end);\n      return forec;\n    },\n    icon: function (ico) {\n      return \"http://openweathermap.org/img/wn/\" + ico + \"@2x.png\";\n    },\n    store: function (storage, timeout) {\n      forec.storage = storage;\n\n      if (timeout !== undefined && timeout !== 'never') {\n        if (forec.storeClearTimeout !== undefined) {\n          clearInterval(forec.storeClearTimeout);\n        }\n\n        forec.storeClearTimeout = setInterval(function () {\n          forec.response = [];\n          forec.storage.clear();\n        }, timeout * 60 * 1000);\n      }\n\n      return forec;\n    },\n    response: [],\n    result: function () {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var filterResultsByDate, fetcher, getByDate, locationResolved, apiQuery, buildResponse, _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u;\n\n        var _v, _w, _x, _y, _z, _0;\n\n        return __generator(this, function (_1) {\n          switch (_1.label) {\n            case 0:\n              filterResultsByDate = function (results) {\n                return results.filter(function (res) {\n                  return res.weather.dt >= forec.dates[0].getTime() && res.weather.dt <= forec.dates[1].getTime();\n                });\n              };\n\n              fetcher = forec.fetchingFn;\n\n              if (fetcher === undefined) {\n                return [2\n                /*return*/\n                , forec.response];\n              }\n\n              getByDate = filterResultsByDate(forec.response);\n\n              if (getByDate.length > 0) {\n                return [2\n                /*return*/\n                , getByDate];\n              }\n\n              locationResolved = forec.location.get();\n              apiQuery = {\n                appid: apiKey,\n                isPro: isPro,\n                units: forec.unit,\n                lang: forec.lang,\n                from: forec.dates[0],\n                to: forec.dates[1],\n                by: !isPro && locationResolved.kind !== 'geo' ? 'day' : 'hour'\n              };\n\n              buildResponse = function (query) {\n                return requests_1.request(query, fetcher, forec.storage, forec.reporter);\n              };\n\n              _a = locationResolved.kind;\n\n              switch (_a) {\n                case 'geo':\n                  return [3\n                  /*break*/\n                  , 1];\n\n                case 'id':\n                  return [3\n                  /*break*/\n                  , 3];\n\n                case 'ids':\n                  return [3\n                  /*break*/\n                  , 5];\n\n                case 'place':\n                  return [3\n                  /*break*/\n                  , 7];\n\n                case 'places':\n                  return [3\n                  /*break*/\n                  , 9];\n\n                case 'zip':\n                  return [3\n                  /*break*/\n                  , 11];\n              }\n\n              return [3\n              /*break*/\n              , 13];\n\n            case 1:\n              _c = (_b = (_v = forec.response).push).apply;\n              _d = [_v];\n              return [4\n              /*yield*/\n              , buildResponse(__assign(__assign({}, apiQuery), {\n                kind: 'geo',\n                lat: locationResolved.geo.lat,\n                lon: locationResolved.geo.lon\n              }))];\n\n            case 2:\n              _c.apply(_b, _d.concat([_1.sent() || []]));\n\n              return [3\n              /*break*/\n              , 13];\n\n            case 3:\n              _f = (_e = (_w = forec.response).push).apply;\n              _g = [_w];\n              return [4\n              /*yield*/\n              , buildResponse(__assign(__assign({}, apiQuery), {\n                kind: 'id',\n                cityId: locationResolved.id.toString()\n              }))];\n\n            case 4:\n              _f.apply(_e, _g.concat([_1.sent() || []]));\n\n              return [3\n              /*break*/\n              , 13];\n\n            case 5:\n              _j = (_h = (_x = forec.response).push).apply;\n              _k = [_x];\n              return [4\n              /*yield*/\n              , buildResponse(__assign(__assign({}, apiQuery), {\n                kind: 'ids',\n                citiesId: locationResolved.ids.map(function (id) {\n                  return id.toString();\n                })\n              }))];\n\n            case 6:\n              _j.apply(_h, _k.concat([_1.sent() || []]));\n\n              return [3\n              /*break*/\n              , 13];\n\n            case 7:\n              _m = (_l = (_y = forec.response).push).apply;\n              _o = [_y];\n              return [4\n              /*yield*/\n              , buildResponse(__assign(__assign({}, apiQuery), {\n                kind: 'city',\n                cityName: locationResolved.place\n              }))];\n\n            case 8:\n              _m.apply(_l, _o.concat([_1.sent() || []]));\n\n              return [3\n              /*break*/\n              , 13];\n\n            case 9:\n              _q = (_p = (_z = forec.response).push).apply;\n              _r = [_z];\n              return [4\n              /*yield*/\n              , buildResponse(__assign(__assign({}, apiQuery), {\n                kind: 'city',\n                cityName: locationResolved.places.join(',')\n              }))];\n\n            case 10:\n              _q.apply(_p, _r.concat([_1.sent() || []]));\n\n              return [3\n              /*break*/\n              , 13];\n\n            case 11:\n              _t = (_s = (_0 = forec.response).push).apply;\n              _u = [_0];\n              return [4\n              /*yield*/\n              , buildResponse(__assign(__assign({}, apiQuery), {\n                kind: 'zip',\n                zipCode: locationResolved.zip.code,\n                countryCode: locationResolved.zip.country\n              }))];\n\n            case 12:\n              _t.apply(_s, _u.concat([_1.sent() || []]));\n\n              return [3\n              /*break*/\n              , 13];\n\n            case 13:\n              forec.response = forec.response.sort(function (a, b) {\n                return a.weather.dt - b.weather.dt;\n              });\n              return [2\n              /*return*/\n              , filterResultsByDate(forec.response)];\n          }\n        });\n      });\n    },\n    list: function (by) {\n      return list_querify_1.listModification(forec, by || 'day');\n    }\n  });\n  return forec;\n};","map":{"version":3,"sources":["/Users/smekiboy/Desktop/weather/node_modules/forecast-query/weather/forecast.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","__spreadArrays","il","r","Array","k","a","j","jl","defineProperty","exports","forecast","util_1","require","requests_1","querify_1","list_querify_1","location","loc","set","item","geo","ids","places","zip","kind","id","place","get","storageUnit","stored","clear","getItem","key","JSON","stringify","index","keys","removeItem","undefined","setItem","parse","forec","copy","all","running","subscribers","map","agent","dates","apiKey","isPro","Error","todayValue","today","end","Date","setHours","setMinutes","setSeconds","querify","storage","lang","language","response","units","unit","reporter","console","warn","fetchingFn","window","fetch","geolocation","navigator","e_1","_a","getCurrentPosition","around","coords","latitude","longitude","lat","lon","at","from","to","end_1","fn","in","_i","code","country","error","subscribe","agents","clearSubscribers","dayAfterTomorrow","daysAheadFromNow","dayBeforeYesterday","tomorrow","yesterday","which","nextFrom","setDate","getDate","nextEnd","getHours","previous","week","closestWeek","hour","movedDate","toString","icon","ico","store","timeout","storeClearTimeout","clearInterval","setInterval","filterResultsByDate","fetcher","getByDate","locationResolved","apiQuery","buildResponse","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","_s","_t","_u","_v","_w","_x","_y","_z","_0","_1","results","filter","res","weather","dt","getTime","appid","by","query","request","concat","cityId","citiesId","cityName","join","zipCode","countryCode","sort","b","list","listModification"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.forecast = void 0;\nvar util_1 = require(\"./util\");\nvar requests_1 = require(\"./requests\");\nvar querify_1 = require(\"./querify\");\nvar list_querify_1 = require(\"./list-querify\");\nvar location = function () {\n    var loc = {\n        set: function (item) {\n            delete loc.geo;\n            delete loc.ids;\n            delete loc.places;\n            delete loc.zip;\n            switch (item.kind) {\n                case 'geo':\n                    loc.geo = item.geo;\n                    break;\n                case 'id':\n                    loc.ids = [item.id];\n                    break;\n                case 'ids':\n                    loc.ids = item.ids;\n                    break;\n                case 'place':\n                    loc.places = [item.place];\n                    break;\n                case 'places':\n                    loc.places = item.places;\n                    break;\n                case 'zip':\n                    loc.zip = item.zip;\n                    break;\n            }\n            return loc;\n        },\n        get: function () {\n            if (loc.geo) {\n                return { kind: 'geo', geo: loc.geo };\n            }\n            if (loc.ids && loc.ids.length === 1) {\n                return { kind: 'id', id: loc.ids[0] };\n            }\n            if (loc.ids && loc.ids.length > 1) {\n                return { kind: 'ids', ids: loc.ids };\n            }\n            if (loc.places && loc.places.length === 1) {\n                return { kind: 'place', place: loc.places[0] };\n            }\n            if (loc.places && loc.places.length > 1) {\n                return { kind: 'places', places: loc.places };\n            }\n            if (loc.zip) {\n                return { kind: 'zip', zip: loc.zip };\n            }\n            return { kind: 'nothing' };\n        }\n    };\n    return loc;\n};\nvar storageUnit = {\n    stored: {},\n    clear: function () {\n        storageUnit.stored = {};\n    },\n    getItem: function (key) { return storageUnit.stored[key] ? JSON.stringify(storageUnit.stored[key]) : null; },\n    key: function (index) { return Object.keys(storageUnit.stored)[index]; },\n    length: 0,\n    removeItem: function (key) {\n        if (storageUnit.stored[key] !== undefined) {\n            storageUnit.length -= 1;\n            delete storageUnit.stored[key];\n        }\n    },\n    setItem: function (key, value) {\n        if (storageUnit.stored[key] === undefined) {\n            storageUnit.length += 1;\n            storageUnit.stored[key] = JSON.parse(value);\n        }\n    },\n};\nvar resolve = function (forec) {\n    var copy = forec.copy();\n    Promise.all(forec.running).then(function () {\n        forec.running = forec.subscribers.map(function (agent) { return agent(copy.dates[0], copy.dates[1], copy); });\n    });\n};\nexports.forecast = function (apiKey, isPro) {\n    if (isPro === void 0) { isPro = false; }\n    if (!apiKey) {\n        throw Error('Cannot initialize forecast without api key from openweathermap.org!');\n    }\n    var todayValue = util_1.today();\n    var end = new Date(todayValue);\n    end.setHours(23);\n    end.setMinutes(59);\n    end.setSeconds(59);\n    var forec = querify_1.querify({\n        dates: [todayValue, end],\n        storage: storageUnit,\n        location: location().set({ kind: 'place', place: 'New York' }),\n        lang: 'en',\n        language: function (lang) {\n            forec.lang = lang;\n            forec.response = [];\n            resolve(forec);\n            return forec;\n        },\n        units: function (unit) {\n            forec.unit = unit === 'kelvin' ? undefined : unit;\n            forec.response = [];\n            resolve(forec);\n            return forec;\n        },\n        reporter: console.warn,\n        fetchingFn: typeof window !== 'undefined' ? window.fetch : undefined,\n        geo: function (geolocation) {\n            if (geolocation === void 0) { geolocation = typeof navigator !== 'undefined' && typeof navigator.geolocation !== 'undefined' ? navigator.geolocation : undefined; }\n            return __awaiter(void 0, void 0, void 0, function () {\n                var result, e_1;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            if (!geolocation) {\n                                return [2 /*return*/, forec];\n                            }\n                            _a.label = 1;\n                        case 1:\n                            _a.trys.push([1, 3, , 4]);\n                            return [4 /*yield*/, new Promise(function (resolve, reject) { return geolocation.getCurrentPosition(resolve, reject); })];\n                        case 2:\n                            result = _a.sent();\n                            forec.around(result.coords.latitude, result.coords.longitude);\n                            return [3 /*break*/, 4];\n                        case 3:\n                            e_1 = _a.sent();\n                            forec.reporter(e_1);\n                            return [3 /*break*/, 4];\n                        case 4: return [2 /*return*/, forec];\n                    }\n                });\n            });\n        },\n        around: function (lat, lon) {\n            forec.location.set({ kind: 'geo', geo: { lat: lat, lon: lon } });\n            forec.response = [];\n            resolve(forec);\n            return forec;\n        },\n        at: function (from, to) {\n            if (!to) {\n                var end_1 = new Date(from);\n                end_1.setHours(23);\n                end_1.setMinutes(59);\n                end_1.setSeconds(59);\n                forec.dates = [new Date(from), end_1];\n            }\n            else {\n                forec.dates = [new Date(from), new Date(to)];\n            }\n            resolve(forec);\n            return forec;\n        },\n        copy: function () {\n            var copy = exports.forecast(apiKey, isPro);\n            copy.dates = __spreadArrays(forec.dates);\n            copy.location = __assign({}, forec.location);\n            copy.response = __spreadArrays(forec.response);\n            copy.reporter = forec.reporter;\n            copy.fetchingFn = forec.fetchingFn;\n            copy.storage = forec.storage;\n            copy.subscribers = __spreadArrays(forec.subscribers);\n            copy.running = __spreadArrays(forec.running);\n            copy.unit = forec.unit;\n            copy.lang = forec.lang;\n            copy.reporter = forec.reporter;\n            return copy;\n        },\n        fetch: function (fn) {\n            forec.fetchingFn = fn;\n            return forec;\n        },\n        in: function () {\n            var places = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                places[_i] = arguments[_i];\n            }\n            if (places.length > 0) {\n                if (typeof places[0] === 'string') {\n                    if (places.length > 1) {\n                        forec.location.set({ kind: 'places', places: places });\n                    }\n                    else {\n                        forec.location.set({ kind: 'place', place: places[0] });\n                    }\n                }\n                if (typeof places[0] === 'number') {\n                    if (places.length > 1) {\n                        forec.location.set({ kind: 'ids', ids: places });\n                    }\n                    else {\n                        forec.location.set({ kind: 'id', id: places[0] });\n                    }\n                }\n                forec.response = [];\n                resolve(forec);\n            }\n            return forec;\n        },\n        zip: function (code, country) {\n            forec.location.set({ kind: 'zip', zip: { code: code, country: country } });\n            forec.response = [];\n            resolve(forec);\n            return forec;\n        },\n        error: function (reporter) {\n            forec.reporter = reporter;\n            return forec;\n        },\n        subscribe: function () {\n            var agents = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                agents[_i] = arguments[_i];\n            }\n            forec.subscribers = agents;\n            return forec;\n        },\n        clearSubscribers: function () { return __awaiter(void 0, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, Promise.all(forec.running)];\n                    case 1:\n                        _a.sent();\n                        forec.subscribers = [];\n                        return [2 /*return*/, forec];\n                }\n            });\n        }); },\n        subscribers: [],\n        running: [],\n        dayAfterTomorrow: function () {\n            forec.at(util_1.daysAheadFromNow(2));\n            return forec;\n        },\n        dayBeforeYesterday: function () {\n            forec.at(util_1.daysAheadFromNow(-2));\n            return forec;\n        },\n        tomorrow: function () {\n            forec.at(util_1.daysAheadFromNow(1));\n            return forec;\n        },\n        yesterday: function () {\n            forec.at(util_1.daysAheadFromNow(-1));\n            return forec;\n        },\n        today: function () {\n            var todayValue = util_1.today();\n            var end = new Date(todayValue);\n            end.setHours(23);\n            end.setMinutes(59);\n            end.setSeconds(59);\n            forec.at(todayValue, end);\n            return forec;\n        },\n        next: function (which) {\n            if (!which || which === 'day') {\n                var nextFrom = new Date(forec.dates[0]);\n                nextFrom.setDate(nextFrom.getDate() + 1);\n                var nextEnd = new Date(nextFrom);\n                nextEnd.setDate(nextEnd.getDate() + 1);\n                forec.at(nextFrom, nextEnd);\n            }\n            else {\n                var nextFrom = new Date(forec.dates[0]);\n                nextFrom.setHours(nextFrom.getHours() + 1);\n                var nextEnd = new Date(nextFrom);\n                nextEnd.setDate(nextEnd.getDate() + 1);\n                forec.at(nextFrom, nextEnd);\n            }\n            return forec;\n        },\n        previous: function (which) {\n            if (!which || which === 'day') {\n                var nextFrom = new Date(forec.dates[0]);\n                nextFrom.setDate(nextFrom.getDate() - 1);\n                var nextEnd = new Date(nextFrom);\n                nextEnd.setDate(nextEnd.getDate() + 1);\n                forec.at(nextFrom, nextEnd);\n            }\n            else {\n                var nextFrom = new Date(forec.dates[0]);\n                nextFrom.setHours(nextFrom.getHours() - 1);\n                var nextEnd = new Date(nextFrom);\n                nextEnd.setDate(nextEnd.getDate() + 1);\n                forec.at(nextFrom, nextEnd);\n            }\n            return forec;\n        },\n        week: function (kind) {\n            forec.at.apply(forec, util_1.closestWeek(kind || 'all'));\n            return forec;\n        },\n        hour: function (which) {\n            var movedDate = new Date(forec.dates[0]);\n            movedDate.setHours(which);\n            var end = new Date(movedDate.toString());\n            end.setHours(23);\n            end.setMinutes(59);\n            end.setSeconds(59);\n            forec.at(movedDate, end);\n            return forec;\n        },\n        icon: function (ico) { return \"http://openweathermap.org/img/wn/\" + ico + \"@2x.png\"; },\n        store: function (storage, timeout) {\n            forec.storage = storage;\n            if (timeout !== undefined && timeout !== 'never') {\n                if (forec.storeClearTimeout !== undefined) {\n                    clearInterval(forec.storeClearTimeout);\n                }\n                forec.storeClearTimeout = setInterval(function () {\n                    forec.response = [];\n                    forec.storage.clear();\n                }, timeout * 60 * 1000);\n            }\n            return forec;\n        },\n        response: [],\n        result: function () { return __awaiter(void 0, void 0, void 0, function () {\n            var filterResultsByDate, fetcher, getByDate, locationResolved, apiQuery, buildResponse, _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u;\n            var _v, _w, _x, _y, _z, _0;\n            return __generator(this, function (_1) {\n                switch (_1.label) {\n                    case 0:\n                        filterResultsByDate = function (results) { return results.filter(function (res) { return res.weather.dt >= forec.dates[0].getTime()\n                            && res.weather.dt <= forec.dates[1].getTime(); }); };\n                        fetcher = forec.fetchingFn;\n                        if (fetcher === undefined) {\n                            return [2 /*return*/, forec.response];\n                        }\n                        getByDate = filterResultsByDate(forec.response);\n                        if (getByDate.length > 0) {\n                            return [2 /*return*/, getByDate];\n                        }\n                        locationResolved = forec.location.get();\n                        apiQuery = {\n                            appid: apiKey,\n                            isPro: isPro,\n                            units: forec.unit,\n                            lang: forec.lang,\n                            from: forec.dates[0],\n                            to: forec.dates[1],\n                            by: !isPro && locationResolved.kind !== 'geo' ? 'day' : 'hour',\n                        };\n                        buildResponse = function (query) { return requests_1.request(query, fetcher, forec.storage, forec.reporter); };\n                        _a = locationResolved.kind;\n                        switch (_a) {\n                            case 'geo': return [3 /*break*/, 1];\n                            case 'id': return [3 /*break*/, 3];\n                            case 'ids': return [3 /*break*/, 5];\n                            case 'place': return [3 /*break*/, 7];\n                            case 'places': return [3 /*break*/, 9];\n                            case 'zip': return [3 /*break*/, 11];\n                        }\n                        return [3 /*break*/, 13];\n                    case 1:\n                        _c = (_b = (_v = forec.response).push).apply;\n                        _d = [_v];\n                        return [4 /*yield*/, buildResponse(__assign(__assign({}, apiQuery), { kind: 'geo', lat: locationResolved.geo.lat, lon: locationResolved.geo.lon }))];\n                    case 2:\n                        _c.apply(_b, _d.concat([((_1.sent()) || [])]));\n                        return [3 /*break*/, 13];\n                    case 3:\n                        _f = (_e = (_w = forec.response).push).apply;\n                        _g = [_w];\n                        return [4 /*yield*/, buildResponse(__assign(__assign({}, apiQuery), { kind: 'id', cityId: locationResolved.id.toString() }))];\n                    case 4:\n                        _f.apply(_e, _g.concat([((_1.sent()) || [])]));\n                        return [3 /*break*/, 13];\n                    case 5:\n                        _j = (_h = (_x = forec.response).push).apply;\n                        _k = [_x];\n                        return [4 /*yield*/, buildResponse(__assign(__assign({}, apiQuery), { kind: 'ids', citiesId: locationResolved.ids.map(function (id) { return id.toString(); }) }))];\n                    case 6:\n                        _j.apply(_h, _k.concat([((_1.sent()) || [])]));\n                        return [3 /*break*/, 13];\n                    case 7:\n                        _m = (_l = (_y = forec.response).push).apply;\n                        _o = [_y];\n                        return [4 /*yield*/, buildResponse(__assign(__assign({}, apiQuery), { kind: 'city', cityName: locationResolved.place }))];\n                    case 8:\n                        _m.apply(_l, _o.concat([((_1.sent()) || [])]));\n                        return [3 /*break*/, 13];\n                    case 9:\n                        _q = (_p = (_z = forec.response).push).apply;\n                        _r = [_z];\n                        return [4 /*yield*/, buildResponse(__assign(__assign({}, apiQuery), { kind: 'city', cityName: locationResolved.places.join(',') }))];\n                    case 10:\n                        _q.apply(_p, _r.concat([((_1.sent()) || [])]));\n                        return [3 /*break*/, 13];\n                    case 11:\n                        _t = (_s = (_0 = forec.response).push).apply;\n                        _u = [_0];\n                        return [4 /*yield*/, buildResponse(__assign(__assign({}, apiQuery), { kind: 'zip', zipCode: locationResolved.zip.code, countryCode: locationResolved.zip.country }))];\n                    case 12:\n                        _t.apply(_s, _u.concat([((_1.sent()) || [])]));\n                        return [3 /*break*/, 13];\n                    case 13:\n                        forec.response = forec.response.sort(function (a, b) { return a.weather.dt - b.weather.dt; });\n                        return [2 /*return*/, filterResultsByDate(forec.response)];\n                }\n            });\n        }); },\n        list: function (by) { return list_querify_1.listModification(forec, by || 'day'); },\n    });\n    return forec;\n};\n"]},"metadata":{},"sourceType":"script"}